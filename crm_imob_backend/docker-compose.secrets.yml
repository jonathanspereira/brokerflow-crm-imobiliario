version: '3.8'

secrets:
  jwt_secret:
    file: ./secrets/jwt_secret
  encryption_key:
    file: ./secrets/encryption_key
  database_url:
    file: ./secrets/database_url

services:
  backend:
    environment:
      NODE_ENV: production
      JWT_SECRET_FILE: /run/secrets/jwt_secret
      ENCRYPTION_KEY_FILE: /run/secrets/encryption_key
      DATABASE_URL_FILE: /run/secrets/database_url
    secrets:
      - jwt_secret
      - encryption_key
      - database_url
    restart: unless-stopped
